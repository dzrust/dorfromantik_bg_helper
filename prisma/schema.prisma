datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model Campaign {
  id                    String        @id @default(cuid())
  name                  String
  startDate             DateTime
  endDate               DateTime?
  players               Player[]
  achievementsUnlocked  Achievement[]
  sessions              PlaySession[]
}

model Player {
  id          String      @id @default(cuid())
  name        String
  campaign    Campaign?   @relation(fields: [campaignId], references: [id])
  campaignId  String?
}

model Achievement {
  id          String     @id @default(cuid())
  key         String
  campaign    Campaign?  @relation(fields: [campaignId], references: [id])
  campaignId  String?
}

model PlaySession {
  id              String     @id @default(cuid())
  index           Int
  date            DateTime
  campaign        Campaign   @relation(fields: [campaignId], references: [id])
  campaignId      String
  players         Player[]
  tiles           TaskTile[]
  section1_taskSum Int
  flagsGrain       Int
  flagsCity        Int
  flagsForest      Int
  longestRailroad  Int
  longestRiver     Int
  achievementScores Json
  totalScore       Int
}

model TaskTile {
  id          String      @id @default(cuid())
  type        String
  value       Int
  state       String
  session     PlaySession @relation(fields: [sessionId], references: [id])
  sessionId   String
}
